(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{442:function(e,r,t){"use strict";t.r(r);var a=t(19),s=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"fast-dfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fast-dfs"}},[e._v("#")]),e._v(" Fast-DFS")]),e._v(" "),t("h2",{attrs:{id:"characters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#characters"}},[e._v("#")]),e._v(" Characters")]),e._v(" "),t("ol",[t("li",[e._v("Client")]),e._v(" "),t("li",[e._v("Tracker Server\n"),t("ol",[t("li",[e._v("tracker works as scheduler, it contains info of each storage server")])])]),e._v(" "),t("li",[e._v("Storage Server\n"),t("ol",[t("li",[e._v("storage servers are gouped")]),e._v(" "),t("li",[e._v("server in same group has same data")]),e._v(" "),t("li",[e._v("storage server relies on OS's file system since it store file directly")]),e._v(" "),t("li",[e._v("storage server has two level sub dir, each level has 256 folder named from 00 to FF")])])])]),e._v(" "),t("h2",{attrs:{id:"upload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upload"}},[e._v("#")]),e._v(" Upload")]),e._v(" "),t("ol",[t("li",[e._v("Client requests tracker to get a storage server's IP and port")]),e._v(" "),t("li",[e._v("Client send file to storage server")]),e._v(" "),t("li",[e._v("Storage server write file to disk")]),e._v(" "),t("li",[e._v("Storage return file_id, path, filename... to Client")])]),e._v(" "),t("h2",{attrs:{id:"download"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download"}},[e._v("#")]),e._v(" Download")]),e._v(" "),t("ol",[t("li",[e._v("Client send file info to tracker to get a storage server's IP and port")]),e._v(" "),t("li",[e._v("Tracker follow these rules to choose storage node and promise reqired file available\n"),t("ol",[t("li",[e._v("source storage node, souce node's address is encoded in file name")]),e._v(" "),t("li",[e._v("whose current timestamp > created time + max sync time")]),e._v(" "),t("li",[e._v("whose file created timestamp < storage node's lates sync timestamp")])])]),e._v(" "),t("li",[e._v("Client gets file from storage")])]),e._v(" "),t("h2",{attrs:{id:"synchronize"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#synchronize"}},[e._v("#")]),e._v(" Synchronize")]),e._v(" "),t("ol",[t("li",[e._v("Storage reports its state and file info to tracker periodically")])]),e._v(" "),t("h2",{attrs:{id:"file-organization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-organization"}},[e._v("#")]),e._v(" File Organization")]),e._v(" "),t("ol",[t("li",[e._v("group1/M00/00/FF/wKiyCl48KhqATsPqAABdrZgsqUU663.jpg")]),e._v(" "),t("li",[e._v("FID = group + virtual disk path + two level sub dir + file name")])])])}),[],!1,null,null,null);r.default=s.exports}}]);
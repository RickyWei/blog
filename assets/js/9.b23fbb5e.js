(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{365:function(e,t,r){e.exports=r.p+"assets/img/fastdfs.872c399e.png"},422:function(e,t,r){"use strict";r.r(t);var a=r(19),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"fast-dfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fast-dfs"}},[e._v("#")]),e._v(" Fast-DFS")]),e._v(" "),a("h2",{attrs:{id:"characters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#characters"}},[e._v("#")]),e._v(" Characters")]),e._v(" "),a("ol",[a("li",[e._v("Client")]),e._v(" "),a("li",[e._v("Tracker Server\n"),a("ol",[a("li",[e._v("tracker works as scheduler, it contains info of each storage server")])])]),e._v(" "),a("li",[e._v("Storage Server\n"),a("ol",[a("li",[e._v("storage servers are gouped")]),e._v(" "),a("li",[e._v("server in same group has same data")]),e._v(" "),a("li",[e._v("storage server relies on OS's file system since it store file directly")]),e._v(" "),a("li",[e._v("storage server has two level sub dir, each level has 256 folder named from 00 to FF")])])])]),e._v(" "),a("h2",{attrs:{id:"upload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upload"}},[e._v("#")]),e._v(" Upload")]),e._v(" "),a("ol",[a("li",[e._v("Client requests tracker to get a storage server's IP and port")]),e._v(" "),a("li",[e._v("Client send file to storage server")]),e._v(" "),a("li",[e._v("Storage server write file to disk")]),e._v(" "),a("li",[e._v("Storage return file_id, path, filename... to Client")])]),e._v(" "),a("h2",{attrs:{id:"download"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download"}},[e._v("#")]),e._v(" Download")]),e._v(" "),a("ol",[a("li",[e._v("Client send file info to tracker to get a storage server's IP and port")]),e._v(" "),a("li",[e._v("Tracker follow these rules to choose storage node and promise reqired file available\n"),a("ol",[a("li",[e._v("source storage node, souce node's address is encoded in file name")]),e._v(" "),a("li",[e._v("whose current timestamp > created time + max sync time")]),e._v(" "),a("li",[e._v("whose file created timestamp < storage node's lates sync timestamp")])])]),e._v(" "),a("li",[e._v("Client gets file from storage")])]),e._v(" "),a("h2",{attrs:{id:"synchronize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#synchronize"}},[e._v("#")]),e._v(" Synchronize")]),e._v(" "),a("ol",[a("li",[e._v("Storage reports its state and file info to tracker periodically")])]),e._v(" "),a("h2",{attrs:{id:"file-organization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-organization"}},[e._v("#")]),e._v(" File Organization")]),e._v(" "),a("ol",[a("li",[e._v("group1/M00/00/FF/wKiyCl48KhqATsPqAABdrZgsqUU663.jpg")]),e._v(" "),a("li",[e._v("FID = group + virtual disk path + two level sub dir + file name")])]),e._v(" "),a("h2",{attrs:{id:"deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy"}},[e._v("#")]),e._v(" Deploy")]),e._v(" "),a("p",[a("img",{attrs:{src:r(365),alt:"fastdfs"}})])])}),[],!1,null,null,null);t.default=s.exports}}]);